(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,41035,e=>{"use strict";var s=e.i(43476),a=e.i(71645),l=e.i(35025);function t(){let{items:e,total:t,clearCart:i}=(0,l.useCart)(),[d,r]=(0,a.useState)(""),[o,n]=(0,a.useState)(""),[c,h]=(0,a.useState)(""),[u,m]=(0,a.useState)(!1),[x,p]=(0,a.useState)(!1),g=async()=>{if(e.length){m(!0);try{let s=await fetch("/sierra-negra/api/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:e})}),a=await s.json();a.url?window.location.href=a.url:(console.error("No session URL",a),alert("No se pudo iniciar el pago. Revisa la consola."))}catch(e){console.error(e),alert("Error al iniciar el pago.")}finally{m(!1)}}};return x?(0,s.jsxs)("div",{className:"p-8 bg-white rounded-xl shadow-md text-center",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold",children:"Pago recibido"}),(0,s.jsxs)("p",{className:"mt-2 text-gray-600",children:["Gracias ",d||"cliente",". Se ha procesado tu pedido."]})]}):(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,s.jsxs)("div",{className:"p-6 bg-white rounded-xl shadow-md",children:[(0,s.jsx)("h3",{className:"font-semibold text-lg",children:"Datos de envío"}),(0,s.jsxs)("div",{className:"mt-4 space-y-3",children:[(0,s.jsx)("input",{value:d,onChange:e=>r(e.target.value),placeholder:"Nombre",className:"w-full p-3 border rounded"}),(0,s.jsx)("input",{value:o,onChange:e=>n(e.target.value),placeholder:"Email",className:"w-full p-3 border rounded"}),(0,s.jsx)("textarea",{value:c,onChange:e=>h(e.target.value),placeholder:"Dirección",className:"w-full p-3 border rounded"}),(0,s.jsx)("button",{onClick:g,disabled:u||!e.length,className:"w-full bg-[#2D5016] text-white px-4 py-3 rounded-full",children:u?"Procesando...":`Pagar $${t.toFixed(2)}`})]})]}),(0,s.jsxs)("div",{className:"p-6 bg-white rounded-xl shadow-md",children:[(0,s.jsx)("h3",{className:"font-semibold text-lg",children:"Resumen del pedido"}),(0,s.jsx)("ul",{className:"mt-4 space-y-3",children:e.map(e=>(0,s.jsxs)("li",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium",children:e.name}),(0,s.jsxs)("div",{className:"text-sm text-gray-500",children:[e.quantity," × $",e.price.toFixed(2)]})]}),(0,s.jsxs)("div",{className:"font-semibold",children:["$",(e.quantity*e.price).toFixed(2)]})]},e.id))}),(0,s.jsxs)("div",{className:"mt-6 flex items-center justify-between font-semibold",children:[(0,s.jsx)("div",{children:"Total"}),(0,s.jsxs)("div",{children:["$",t.toFixed(2)]})]})]})]})}e.s(["default",()=>t])}]);